name: Update ZipZAP M3U
on:
  schedule:
    - cron: '0 12 * * *'
  workflow_dispatch:

jobs:
  update-m3u:
    permissions:
      contents: write # YENƒ∞ EKLENEN SATIR
    runs-on: ubuntu-latest
    steps:
      - name: ‚¨áÔ∏è Depoyu √áek
        uses: actions/checkout@v4
      # ... diƒüer adƒ±mlarƒ±nƒ±z devam ediyor
      - name: üì¶ M3U ƒ∞√ßeriƒüini Worker URL'den √áekme
        id: fetch_m3u
        run: |
          WORKER_URL="http://smart.aio-digital.workers.dev/TV.php?ID=https://zipzaptv.com/"
          curl -sS -A "Mozilla/5.0 (Windows NT 10.0; Win64; x64)" "$WORKER_URL" > ZipZAP.m3u
      - name: ‚öôÔ∏è Deƒüi≈üiklik Var mƒ± Kontrol Et
        id: git_status
        run: echo "changes=$(git status --porcelain ZipZAP.m3u)" >> $GITHUB_OUTPUT
      - name: ‚¨ÜÔ∏è Deƒüi≈üiklikleri Kaydet (Commit) ve G√∂nder (Push)
        if: ${{ steps.git_status.outputs.changes != '' }}
        run: |
          git config user.name "GitHub Actions Bot"
          git config user.email "action@github.com"
          git add ZipZAP.m3u
          git commit -m "Auto update: Fetch latest ZipZAP M3U from Worker"
          git push
